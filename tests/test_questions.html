<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Teste de Carregamento</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .success { color: green; }
    .error { color: red; }
    pre { background: #f5f5f5; padding: 10px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>ğŸ” DiagnÃ³stico Quest4Couple</h1>
  <div id="results"></div>

  <script>
    const results = document.getElementById('results');
    
    // Teste 1: Carregar JSON
    results.innerHTML += '<h2>Teste 1: Carregar JSON</h2>';
    
    fetch('data/packs_data_clean.json')
      .then(response => {
        if (!response.ok) {
          throw new Error(`HTTP ${response.status}`);
        }
        results.innerHTML += `<p class="success">âœ… JSON carregado com sucesso!</p>`;
        return response.json();
      })
      .then(data => {
        results.innerHTML += `<p class="success">âœ… JSON parseado com sucesso!</p>`;
        results.innerHTML += `<p>ğŸ“¦ Total de packs: ${data.length}</p>`;
        
        // Mostrar estrutura do primeiro pack
        results.innerHTML += '<h3>Estrutura do primeiro pack:</h3>';
        results.innerHTML += `<pre>${JSON.stringify(data[0], null, 2).substring(0, 500)}...</pre>`;
        
        // Teste 2: Verificar categorias
        results.innerHTML += '<h2>Teste 2: Verificar Categorias</h2>';
        data.forEach((pack, idx) => {
          results.innerHTML += `<p><strong>${idx + 1}. ${pack.name}</strong>: `;
          if (pack.categories && Array.isArray(pack.categories)) {
            results.innerHTML += `<span class="success">âœ… ${pack.categories.length} categorias</span></p>`;
            
            // Contar perguntas
            let totalQuestions = 0;
            pack.categories.forEach(cat => {
              if (cat.questions) totalQuestions += cat.questions.length;
            });
            results.innerHTML += `<p style="margin-left: 20px;">ğŸ“ Total de perguntas: ${totalQuestions}</p>`;
          } else {
            results.innerHTML += `<span class="error">âŒ Sem categorias!</span></p>`;
          }
        });
        
        // Teste 3: Simular renderizaÃ§Ã£o
        results.innerHTML += '<h2>Teste 3: Simular RenderizaÃ§Ã£o</h2>';
        const testPack = data[0];
        if (testPack.categories) {
          results.innerHTML += `<h3>Renderizando: ${testPack.name}</h3>`;
          testPack.categories.forEach((cat, catIdx) => {
            results.innerHTML += `<h4>${catIdx + 1}. ${cat.name}</h4>`;
            results.innerHTML += `<p>Perguntas: ${cat.questions ? cat.questions.length : 0}</p>`;
            if (cat.questions && cat.questions.length > 0) {
              results.innerHTML += `<p><em>Primeira pergunta: "${cat.questions[0]}"</em></p>`;
            }
          });
        }
      })
      .catch(error => {
        results.innerHTML += `<p class="error">âŒ ERRO: ${error.message}</p>`;
        results.innerHTML += `<p>Detalhes: ${error.stack}</p>`;
      });
    
    // Teste 4: Verificar scripts
    results.innerHTML += '<h2>Teste 4: Scripts Carregados</h2>';
    setTimeout(() => {
      results.innerHTML += `<p>loadAndRenderAllPacks: ${typeof loadAndRenderAllPacks !== 'undefined' ? 'âœ…' : 'âŒ'}</p>`;
      results.innerHTML += `<p>showTheme: ${typeof showTheme !== 'undefined' ? 'âœ…' : 'âŒ'}</p>`;
      results.innerHTML += `<p>renderPackQuestions: ${typeof renderPackQuestions !== 'undefined' ? 'âœ…' : 'âŒ'}</p>`;
    }, 100);
  </script>
  
  <!-- Carregar scripts para teste -->
  <script src="js/app.js"></script>
  <script src="js/rendering.js"></script>
</body>
</html>
